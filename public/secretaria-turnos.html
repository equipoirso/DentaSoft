<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <title>Secretar√≠a ¬∑ Crear Turno</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="./styles.css"/>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.4/firebase-auth-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore-compat.js"></script>
  <script defer src="./common.js"></script>
  <script defer src="./secretaria-turnos.js"></script>

  <style>
    .subcard.centered{grid-column:1 / -1;justify-self:center;width:min(820px,100%);border:1px solid var(--border,#2a2a2a);border-radius:12px;padding:12px;margin:8px 0 4px}
    .inline-fields{display:flex;gap:8px;align-items:center}
    .inline-fields>*{flex:1}
    .span-2{grid-column:1 / -1}
  </style>
</head>
<body>
<header class="topbar">
  <div class="logo">ü¶∑ <span>DENTASOFT</span></div>
  <nav class="menu">
    <a class="backlink upper" href="./secretaria.html">ATR√ÅS</a>
  </nav>
</header>

<section class="container">
  <div class="page-head"><h1 class="headline-xl">Crear Turno</h1></div>

  <div class="card">
    <form id="formTurno">
      <div class="grid-2">

        <!-- DNI + Buscar -->
        <label class="span-2">DNI Paciente
          <div class="inline-fields">
            <input id="pacienteDni" name="pacienteDni"
              inputmode="numeric" maxlength="8" pattern="\d{8}" required
              placeholder="Ej: 12345678" title="Debe contener exactamente 8 n√∫meros">
            <button type="button" id="btnBuscarPaciente" class="btn btn-primary">Buscar</button>
          </div>
        </label>

        <!-- Tarjeta paciente -->
        <div id="pacientePreview" class="subcard centered" style="display:none">
          <div class="headline-s" style="margin-bottom:6px">Paciente</div>
          <div class="grid-2">
            <div><strong>Nombre:</strong> <span id="pNombre"></span></div>
            <div><strong>Apellido:</strong> <span id="pApellido"></span></div>
            <div><strong>Email:</strong> <span id="pEmail"></span></div>
            <div><strong>Tel√©fono:</strong> <span id="pTelefono"></span></div>
            <div class="span-2"><strong>Obra Social:</strong> <span id="pObra"></span></div>
          </div>
        </div>

        <!-- Odont√≥logo -->
        <label>Odont√≥logo
          <select id="selOdo" name="profesionalUid" required>
            <option value="">Cargando‚Ä¶</option>
          </select>
        </label>

        <!-- Motivo -->
        <label>Motivo
          <select id="motivo" name="motivo" required>
            <option value="" disabled selected>Seleccionar‚Ä¶</option>
            <option>Consulta</option><option>Control</option><option>Limpieza</option>
            <option>Urgencia</option><option>Extracci√≥n</option><option>Endodoncia</option>
            <option>Pr√≥tesis</option><option>Ortodoncia</option><option>Implante</option>
            <option>Blanqueamiento</option>
          </select>
        </label>

        <!-- Fecha Inicio -->
        <label>Fecha Inicio
          <div class="inline-fields" id="fiWrap">
            <input type="date" id="fechaDia" required>
            <select id="horaInicio" required>
              <option value="" disabled selected>Hora‚Ä¶</option>
              <option>09:00</option><option>09:30</option>
              <option>10:00</option><option>10:30</option>
              <option>11:00</option><option>11:30</option>
              <option>12:00</option><option>12:30</option>
              <option>13:00</option><option>13:30</option>
              <option>14:00</option><option>14:30</option>
              <option>15:00</option><option>15:30</option>
              <option>16:00</option><option>16:30</option>
              <option>17:00</option><option>17:30</option>
              <option>18:00</option><option>18:30</option>
              <option>17:00</option><option>17:30</option>
            </select>
          </div>
        </label>

        <!-- Fin auto -->
        <label>Fecha Fin (auto +30‚Äô)
          <input id="fechaFinDisplay" type="text" readonly placeholder="dd/mm/aaaa hh:mm">
        </label>

        <!-- Notas -->
        <label class="span-2">Notas (opcional)
          <textarea id="notas" name="notas" rows="3" maxlength="500" placeholder="Observaciones para el turno"></textarea>
        </label>
      </div>

      <div class="actions" style="margin-top:16px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
        <button type="submit" class="btn btn-primary">Crear Turno</button>
        <button type="button" id="btnCancelar" class="btn">Cancelar</button>
      </div>
    </form>

    <div id="status" class="notice" style="display:none;margin-top:12px"></div>
  </div>
</section>
</body>
</html>


